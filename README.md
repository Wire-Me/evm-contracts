# About

This repository contains the source code for WireMe's EVM smart contracts, unit tests for these contracts, and scripts
to compile and deploy the contracts. It also uses ENV vars to configure the private keys used to deploy contracts.

# Setup

## ENV Vars
Create a `.env` file in the root of the repository using `.env.example` as a template

Set the local node URL env var to point to your node running on localhost

Set your private keys for the accounts you want to use for deploying contracts. For localhost, Hardhat will use the public
accounts generated by the local node. For Sepolia and Mainnet, you will need to provide your own private keys.

## Install Dependencies

Run `npm install` to install the required dependencies for the project.

# Deployment
Use Hardhat Ignition to deploy smart contracts

To localhost
```bash
npx hardhat ignition deploy ./ignition/modules/Lock.ts --network localhost
```
To Sepolia
```bash
npx hardhat ignition deploy ./ignition/modules/Lock.ts --network sepolia
```

# Testing

## Setup

Install Foundry

```bash
# Download foundry installer `foundryup`
curl -L https://foundry.paradigm.xyz | bash
# Install forge, cast, anvil, chisel
foundryup
```

## Run Tests

Run the Foundry unit tests using the following command:

```bash
forge test
```

### Run Single Test
To run a single test, you can use the `--match-test` option with the function name. For example:

```bash
forge test --match-test testCreateRelayHappyPath
```

### Debugging Tests
To debug a test, you can use the `console.log`. This will allow you to print variables and other information during the test execution.

```solidity
// Import the console library from Forge
import {console} from "../../lib/forge-std/src/console.sol";
// In your test function, you can use console.log to print variables
console.log(block.timestamp);
```
To see the console logs, you need to run the test with the `-vvvv` flag:
```bash
forge test -vvvv
```